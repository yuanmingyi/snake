{"version":3,"file":"main.b66066835391fd54d0ad.js","mappings":"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","sources":["webpack://snake/./public/game.js"],"sourcesContent":["// Elements\r\nconst canvas = document.getElementById('gameCanvas');\r\nconst ctx = canvas.getContext('2d');\r\nconst scoreElement = document.getElementById('score');\r\nconst finalScoreElement = document.getElementById('finalScore');\r\nconst gameOverDiv = document.getElementById('gameOver');\r\nconst restartBtn = document.getElementById('restart');\r\nconst restartGameOverBtn = document.getElementById('restartGameOver');\r\n\r\n// Game settings\r\nconst gridSize = 20;\r\nconst tileCount = canvas.width / gridSize;\r\n\r\nlet snake = [];\r\nlet dx = 0;\r\nlet dy = 0;\r\nlet foodX = 0;\r\nlet foodY = 0;\r\nlet score = 0;\r\nlet gameRunning = false;\r\nlet gameStarted = false;\r\n\r\nfunction init() {\r\n  snake = [{ x: 10, y: 10 }];\r\n  dx = 0; dy = 0;\r\n  score = 0;\r\n  scoreElement.textContent = score;\r\n  gameOverDiv.classList.add('hidden');\r\n  generateFood();\r\n  gameRunning = true;\r\n  gameStarted = false;\r\n  drawGame();\r\n  \r\n  // Show start message\r\n  showStartMessage();\r\n}\r\n\r\nfunction generateFood() {\r\n  foodX = Math.floor(Math.random() * tileCount);\r\n  foodY = Math.floor(Math.random() * tileCount);\r\n  for (let segment of snake) {\r\n    if (segment.x === foodX && segment.y === foodY) {\r\n      generateFood();\r\n      return;\r\n    }\r\n  }\r\n}\r\n\r\nfunction drawGame() {\r\n  ctx.fillStyle = '#ecf0f1';\r\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n  // snake\r\n  ctx.fillStyle = '#2ecc71';\r\n  for (let segment of snake) {\r\n    ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize - 2, gridSize - 2);\r\n  }\r\n\r\n  // food\r\n  ctx.fillStyle = '#e74c3c';\r\n  ctx.beginPath();\r\n  ctx.arc(foodX * gridSize + gridSize / 2, foodY * gridSize + gridSize / 2, gridSize / 2 - 1, 0, Math.PI * 2);\r\n  ctx.fill();\r\n  \r\n  // Draw start message if game hasn't started\r\n  if (!gameStarted) {\r\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n    \r\n    ctx.fillStyle = 'white';\r\n    ctx.font = '24px Arial';\r\n    ctx.textAlign = 'center';\r\n    ctx.fillText('按任意方向键开始游戏', canvas.width / 2, canvas.height / 2 - 20);\r\n    \r\n    ctx.font = '16px Arial';\r\n    ctx.fillText('使用方向键 ↑ ↓ ← → 控制蛇的移动', canvas.width / 2, canvas.height / 2 + 20);\r\n  }\r\n}\r\n\r\nfunction updateGame() {\r\n  const head = { x: snake[0].x + dx, y: snake[0].y + dy };\r\n\r\n  if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {\r\n    gameOver();\r\n    return;\r\n  }\r\n\r\n  for (let segment of snake) {\r\n    if (head.x === segment.x && head.y === segment.y) {\r\n      gameOver();\r\n      return;\r\n    }\r\n  }\r\n\r\n  snake.unshift(head);\r\n\r\n  if (head.x === foodX && head.y === foodY) {\r\n    score++;\r\n    scoreElement.textContent = score;\r\n    generateFood();\r\n  } else {\r\n    snake.pop();\r\n  }\r\n}\r\n\r\nfunction gameLoop() {\r\n  if (!gameRunning) return;\r\n  updateGame();\r\n  drawGame();\r\n  setTimeout(gameLoop, 100);\r\n}\r\n\r\nfunction gameOver() {\r\n  gameRunning = false;\r\n  gameStarted = false;\r\n  finalScoreElement.textContent = score;\r\n  gameOverDiv.classList.remove('hidden');\r\n}\r\n\r\nfunction showStartMessage() {\r\n  drawGame();\r\n}\r\n\r\ndocument.addEventListener('keydown', function (e) {\r\n  if (!gameRunning) return;\r\n  \r\n  let keyPressed = false;\r\n  switch (e.key) {\r\n    case 'ArrowUp': if (dy !== 1) { dx = 0; dy = -1; keyPressed = true; } break;\r\n    case 'ArrowDown': if (dy !== -1) { dx = 0; dy = 1; keyPressed = true; } break;\r\n    case 'ArrowLeft': if (dx !== 1) { dx = -1; dy = 0; keyPressed = true; } break;\r\n    case 'ArrowRight': if (dx !== -1) { dx = 1; dy = 0; keyPressed = true; } break;\r\n  }\r\n  \r\n  // Start game loop when first key is pressed\r\n  if (gameRunning && keyPressed && !gameStarted) {\r\n    gameStarted = true;\r\n    gameLoop();\r\n  }\r\n});\r\n\r\nrestartBtn.addEventListener('click', init);\r\nrestartGameOverBtn.addEventListener('click', init);\r\n\r\n// Initialize game but don't start loop until first key press\r\ninit();\r\n"],"names":["canvas","document","getElementById","ctx","getContext","scoreElement","finalScoreElement","gameOverDiv","restartBtn","restartGameOverBtn","tileCount","width","snake","dx","dy","foodX","foodY","score","gameRunning","gameStarted","init","x","y","textContent","classList","add","generateFood","drawGame","Math","floor","random","segment","fillStyle","fillRect","height","gridSize","beginPath","arc","PI","fill","font","textAlign","fillText","gameLoop","head","gameOver","unshift","pop","updateGame","setTimeout","remove","addEventListener","e","keyPressed","key"],"ignoreList":[],"sourceRoot":""}