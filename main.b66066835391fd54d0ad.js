(()=>{const t=document.getElementById("gameCanvas"),e=t.getContext("2d"),n=document.getElementById("score"),i=document.getElementById("finalScore"),l=document.getElementById("gameOver"),o=document.getElementById("restart"),r=document.getElementById("restartGameOver"),c=t.width/20;let f=[],d=0,a=0,h=0,s=0,y=0,m=!1,u=!1;function x(){f=[{x:10,y:10}],d=0,a=0,y=0,n.textContent=y,l.classList.add("hidden"),g(),m=!0,u=!1,w(),w()}function g(){h=Math.floor(Math.random()*c),s=Math.floor(Math.random()*c);for(let t of f)if(t.x===h&&t.y===s)return void g()}function w(){e.fillStyle="#ecf0f1",e.fillRect(0,0,t.width,t.height),e.fillStyle="#2ecc71";for(let t of f)e.fillRect(20*t.x,20*t.y,18,18);e.fillStyle="#e74c3c",e.beginPath(),e.arc(20*h+10,20*s+10,9,0,2*Math.PI),e.fill(),u||(e.fillStyle="rgba(0, 0, 0, 0.7)",e.fillRect(0,0,t.width,t.height),e.fillStyle="white",e.font="24px Arial",e.textAlign="center",e.fillText("按任意方向键开始游戏",t.width/2,t.height/2-20),e.font="16px Arial",e.fillText("使用方向键 ↑ ↓ ← → 控制蛇的移动",t.width/2,t.height/2+20))}function v(){m&&(function(){const t={x:f[0].x+d,y:f[0].y+a};if(t.x<0||t.x>=c||t.y<0||t.y>=c)E();else{for(let e of f)if(t.x===e.x&&t.y===e.y)return void E();f.unshift(t),t.x===h&&t.y===s?(y++,n.textContent=y,g()):f.pop()}}(),w(),setTimeout(v,100))}function E(){m=!1,u=!1,i.textContent=y,l.classList.remove("hidden")}document.addEventListener("keydown",function(t){if(!m)return;let e=!1;switch(t.key){case"ArrowUp":1!==a&&(d=0,a=-1,e=!0);break;case"ArrowDown":-1!==a&&(d=0,a=1,e=!0);break;case"ArrowLeft":1!==d&&(d=-1,a=0,e=!0);break;case"ArrowRight":-1!==d&&(d=1,a=0,e=!0)}m&&e&&!u&&(u=!0,v())}),o.addEventListener("click",x),r.addEventListener("click",x),x()})();
//# sourceMappingURL=main.b66066835391fd54d0ad.js.map